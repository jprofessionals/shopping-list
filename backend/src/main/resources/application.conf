ktor {
    deployment {
        port = 8080
        port = ${?PORT}
    }
    application {
        modules = [ no.shoppinglist.ApplicationKt.module ]
    }
}

database {
    url = "jdbc:postgresql://localhost:5432/shopping_list"
    url = ${?DATABASE_URL}
    user = "shopping"
    user = ${?DATABASE_USER}
    password = "shopping_dev"
    password = ${?DATABASE_PASSWORD}
}

valkey {
    host = "localhost"
    host = ${?VALKEY_HOST}
    port = 6379
    port = ${?VALKEY_PORT}
    password = ""
    password = ${?VALKEY_PASSWORD}
}

auth {
    jwt {
        secret = "development-secret-change-in-production"
        secret = ${?JWT_SECRET}
        issuer = "shopping-list"
        audience = "shopping-list-users"
        realm = "Shopping List"
        expirationMinutes = 15
        expirationMinutes = ${?JWT_EXPIRATION_MINUTES}
    }

    google {
        enabled = true
        enabled = ${?GOOGLE_AUTH_ENABLED}
        clientId = ""
        clientId = ${?GOOGLE_CLIENT_ID}
        clientSecret = ""
        clientSecret = ${?GOOGLE_CLIENT_SECRET}
        callbackUrl = "http://localhost:8080/auth/google/callback"
        callbackUrl = ${?GOOGLE_CALLBACK_URL}
    }

    local {
        enabled = true
        enabled = ${?LOCAL_AUTH_ENABLED}
    }
}
